//—————————————————————————————————————————————————————————————————————————————————————————————————
// BUILDSCRIPT.
//—————————————————————————————————————————————————————————————————————————————————————————————————
buildscript {
    repositories {
        mavenCentral()
    }

    ext { set('springCloudVersion', "Hoxton.SR1") }
}


//—————————————————————————————————————————————————————————————————————————————————————————————————
// GRADLE PLUGINS.
//—————————————————————————————————————————————————————————————————————————————————————————————————
plugins {
    id("org.springframework.boot") version "2.2.6.RELEASE"
    id("io.spring.dependency-management") version "1.0.9.RELEASE"
    id("java")
}

//—————————————————————————————————————————————————————————————————————————————————————————————————
// CONFIGURATION.
//—————————————————————————————————————————————————————————————————————————————————————————————————
allprojects {
    "com.virnect"
    version = "2.0"
    sourceCompatibility = "1.8"
    targetCompatibility = "1.8"
}

subprojects {
    apply plugin: 'java'

    dependencies {
    }

    repositories {
        mavenCentral()
    }
}

project(":service-server") {
    apply plugin: 'org.springframework.boot'
    apply plugin: 'io.spring.dependency-management'

    dependencies {
        // Include Sub Modules
        implementation(project(":service-kms"))
        //implementation(project(":service-data"))
        implementation(project(":service-remote-api"))
        implementation(project(":service-dashboard-api"))

        // Lombok and Annotation Configuration Dependencies
        compileOnly 'org.projectlombok:lombok'
        annotationProcessor 'org.projectlombok:lombok'
        annotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'

        // Spring Test Dependencies
        testImplementation('org.springframework.boot:spring-boot-starter-test') {
            exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'
        }
    }

    // Spring Cloud Dependencies Management
    dependencyManagement {
        dependencyManagement {
            imports {
                mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
            }
        }
    }
}

project(":service-remote-api") {
    apply plugin: 'org.springframework.boot'
    apply plugin: 'io.spring.dependency-management'

    dependencies {
        // Include Sub Modules
        compile(project(":service-data"))

        // Lombok and Annotation Configuration Dependencies
        compileOnly 'org.projectlombok:lombok'
        annotationProcessor 'org.projectlombok:lombok'
        annotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'

        // Spring Test Dependencies
        testImplementation('org.springframework.boot:spring-boot-starter-test') {
            exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'
        }
    }

    // Spring Cloud Dependencies Management
    dependencyManagement {
        dependencyManagement {
            imports {
                mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
            }
        }
    }
}

project(":service-dashboard-api") {
    apply plugin: 'org.springframework.boot'
    apply plugin: 'io.spring.dependency-management'

    dependencies {
        // Include Sub Modules
        compile(project(":service-data"))

        // Lombok and Annotation Configuration Dependencies
        compileOnly 'org.projectlombok:lombok'
        annotationProcessor 'org.projectlombok:lombok'
        annotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'

        // Spring Test Dependencies
        testImplementation('org.springframework.boot:spring-boot-starter-test') {
            exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'
        }
    }

    // Spring Cloud Dependencies Management
    dependencyManagement {
        dependencyManagement {
            imports {
                mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
            }
        }
    }
}

project(":service-kms") {
    apply plugin: 'java-library'
}

project(":service-client") {
}

project(":service-java-client") {
}


project(":service-data") {
    apply plugin: 'org.springframework.boot'
    apply plugin: 'io.spring.dependency-management'

    dependencies {
        // Lombok and Annotation Configuration Dependencies
        compileOnly 'org.projectlombok:lombok'
        annotationProcessor 'org.projectlombok:lombok'
        annotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'

        // Spring Test Dependencies
        testImplementation('org.springframework.boot:spring-boot-starter-test') {
            exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'
        }
    }

    // Spring Cloud Dependencies Management
    dependencyManagement {
        dependencyManagement {
            imports {
                mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
            }
        }
    }
}