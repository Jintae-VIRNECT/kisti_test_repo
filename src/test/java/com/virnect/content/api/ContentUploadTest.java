package com.virnect.content.api;

import static org.junit.jupiter.api.Assertions.*;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;
import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.*;

import java.io.File;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.http.MediaType;
import org.springframework.mock.web.MockMultipartFile;
import org.springframework.test.context.ActiveProfiles;
import org.springframework.test.context.jdbc.Sql;
import org.springframework.test.context.jdbc.SqlGroup;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.RequestBuilder;
import org.springframework.transaction.annotation.Transactional;

import com.virnect.content.exception.ContentServiceException;

/**
 * @author jiyong.heo
 * @project PF-ContentManagement
 * @email jiyong.heo@virnect.com
 * @description 컨텐츠 업로드 테스트
 * @since 2020.06.29
 */
@SpringBootTest
@ActiveProfiles("test")
@SqlGroup({
	@Sql(executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD, scripts = "classpath:schema.sql"),
	@Sql(executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD, scripts = "classpath:data.sql")
})
@AutoConfigureMockMvc
public class ContentUploadTest {
	@Value("${upload.dir}")
	private String uploadPath;

	@Autowired
	private MockMvc mockMvc;

	@Test
	@Transactional
	public void uploadContents_DuplicateTargetData_ContentsServiceException() throws Exception {

		String fileName = "299ece42-c810-4347-a979-f6b3241c73e3.Ares";
		File file = new File(uploadPath + fileName);

		file.delete();

		MockMultipartFile mockFile = new MockMultipartFile("content", fileName, "text/plain", "testdata".getBytes());

		RequestBuilder request = multipart("/contents")
			.file(mockFile)
			.contentType(MediaType.MULTIPART_FORM_DATA)
			.param("contentType", "AUGMENTED_REALITY")
			.param("name", "Test Case")
			.param(
				"properties",
				"{\"TargetID\":\"97802bc0-cc5e-436b-bdb3-2ba55f390406\",\"PropertyInfo\":{\"c1eab583-8c05-4e4a-a590-484d5e94db7e\":{\"PropertyInfo\":{\"sceneGroupTitle\":\"\",\"sceneGroupDetail\":\"\",\"ComponentName\":\"씬 그룹\",\"ComponentType\":2,\"identifier\":\"c1eab583-8c05-4e4a-a590-484d5e94db7e\"},\"Child\":{\"9d011d83-2576-4fef-9cbc-13aca71f5410\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"9d011d83-2576-4fef-9cbc-13aca71f5410\"},\"Child\":{\"1a6ae16e-19fb-4363-9ae3-f80332468890\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"1a6ae16e-19fb-4363-9ae3-f80332468890\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}},\"0a7331a9-06a6-4edd-a454-ac324458576b\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"0a7331a9-06a6-4edd-a454-ac324458576b\"},\"Child\":{\"d1976492-190d-4010-8048-fdbf257486d6\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"d1976492-190d-4010-8048-fdbf257486d6\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}},\"d34a2dfe-4b6a-4e18-be14-8d4167b6447f\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"d34a2dfe-4b6a-4e18-be14-8d4167b6447f\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}},\"a27a995a-34f5-44a1-bf78-f67c10f79d6d\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"a27a995a-34f5-44a1-bf78-f67c10f79d6d\"},\"Child\":{\"f8da39d1-1540-4877-95d4-a4865b3d37a3\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"f8da39d1-1540-4877-95d4-a4865b3d37a3\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}},\"be2493ed-7523-4c78-9fc0-3d4ace20b887\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"be2493ed-7523-4c78-9fc0-3d4ace20b887\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}}}},\"0b5539a5-f34b-4d86-8258-12534a9c4623\":{\"PropertyInfo\":{\"sceneGroupTitle\":\"\",\"sceneGroupDetail\":\"\",\"ComponentName\":\"씬 그룹\",\"ComponentType\":2,\"identifier\":\"0b5539a5-f34b-4d86-8258-12534a9c4623\"},\"Child\":{\"dab58732-ce23-484f-9ae2-06805dbab721\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"dab58732-ce23-484f-9ae2-06805dbab721\"},\"Child\":{\"623d96cd-0c40-4d6e-b704-5f5252e1565d\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"623d96cd-0c40-4d6e-b704-5f5252e1565d\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}},\"e80b5a77-e784-426f-986e-fdd8f381f2a7\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"e80b5a77-e784-426f-986e-fdd8f381f2a7\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}},\"eb002e12-f797-44b2-b20f-37a0caff4181\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"eb002e12-f797-44b2-b20f-37a0caff4181\"},\"Child\":{\"5bd34aef-9352-4f00-863b-b83332af996a\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"5bd34aef-9352-4f00-863b-b83332af996a\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}},\"5d9a5fb7-5955-490d-8c3d-bbdfeb434d34\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"5d9a5fb7-5955-490d-8c3d-bbdfeb434d34\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}}}},\"2310ed96-3d86-4b6e-af9f-cb1d600bbdba\":{\"PropertyInfo\":{\"sceneGroupTitle\":\"\",\"sceneGroupDetail\":\"\",\"ComponentName\":\"씬 그룹\",\"ComponentType\":2,\"identifier\":\"2310ed96-3d86-4b6e-af9f-cb1d600bbdba\"},\"Child\":{\"593c35fb-d337-4cf8-b884-57f8b3e5a105\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"593c35fb-d337-4cf8-b884-57f8b3e5a105\"},\"Child\":{\"c345e399-bfa8-42c8-b163-e97c78aceba5\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"c345e399-bfa8-42c8-b163-e97c78aceba5\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}},\"cbb1e6fe-f1d1-44ea-806c-d91b9b31236e\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"cbb1e6fe-f1d1-44ea-806c-d91b9b31236e\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}},\"56015194-4fec-4d19-b6aa-091f7f7a1129\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"56015194-4fec-4d19-b6aa-091f7f7a1129\"},\"Child\":{\"a44b43e5-3dcc-4cdb-be52-f8de0d7aca1c\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"a44b43e5-3dcc-4cdb-be52-f8de0d7aca1c\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}},\"d33e669e-3137-4151-b513-069960b25ef5\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"d33e669e-3137-4151-b513-069960b25ef5\"},\"Child\":{\"00cca620-6e82-48bd-89d0-8b7b24e533dd\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"00cca620-6e82-48bd-89d0-8b7b24e533dd\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}}}}}}"
			)
			.param("userUUID", "498b1839dc29ed7bb2ee90ad6985c608")
			.param("targetData", "testTargetData")
			.param("workspaceUUID", "4d6eab0860969a50acbfa4599fbb5ae8");

		this.mockMvc.perform(request)
			.andDo(print())
			//                .andExpect((result -> assertTrue(result.getResponse().getContentAsString().contains("4101"))))
			.andExpect((result -> assertTrue(result.getResponse().getContentAsString().contains("4001"))))
			.andExpect((result -> assertTrue(
				result.getResolvedException().getClass().isAssignableFrom(ContentServiceException.class))));
	}

	@Test
	@Transactional
	public void uploadContents_UnsupportExtension_ContentsServiceException() throws Exception {

		String fileName = "299ece42-c810-4347-a979-f6b3241c73e3.Bres";
		File file = new File(uploadPath + fileName);

		file.delete();

		MockMultipartFile mockFile = new MockMultipartFile("content", fileName, "text/plain", "testdata".getBytes());

		RequestBuilder request = multipart("/contents")
			.file(mockFile)
			.contentType(MediaType.MULTIPART_FORM_DATA)
			.param("contentType", "AUGMENTED_REALITY")
			.param("name", "Test Case")
			.param(
				"properties",
				"{\"TargetID\":\"97802bc0-cc5e-436b-bdb3-2ba55f390406\",\"PropertyInfo\":{\"c1eab583-8c05-4e4a-a590-484d5e94db7e\":{\"PropertyInfo\":{\"sceneGroupTitle\":\"\",\"sceneGroupDetail\":\"\",\"ComponentName\":\"씬 그룹\",\"ComponentType\":2,\"identifier\":\"c1eab583-8c05-4e4a-a590-484d5e94db7e\"},\"Child\":{\"9d011d83-2576-4fef-9cbc-13aca71f5410\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"9d011d83-2576-4fef-9cbc-13aca71f5410\"},\"Child\":{\"1a6ae16e-19fb-4363-9ae3-f80332468890\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"1a6ae16e-19fb-4363-9ae3-f80332468890\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}},\"0a7331a9-06a6-4edd-a454-ac324458576b\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"0a7331a9-06a6-4edd-a454-ac324458576b\"},\"Child\":{\"d1976492-190d-4010-8048-fdbf257486d6\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"d1976492-190d-4010-8048-fdbf257486d6\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}},\"d34a2dfe-4b6a-4e18-be14-8d4167b6447f\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"d34a2dfe-4b6a-4e18-be14-8d4167b6447f\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}},\"a27a995a-34f5-44a1-bf78-f67c10f79d6d\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"a27a995a-34f5-44a1-bf78-f67c10f79d6d\"},\"Child\":{\"f8da39d1-1540-4877-95d4-a4865b3d37a3\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"f8da39d1-1540-4877-95d4-a4865b3d37a3\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}},\"be2493ed-7523-4c78-9fc0-3d4ace20b887\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"be2493ed-7523-4c78-9fc0-3d4ace20b887\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}}}},\"0b5539a5-f34b-4d86-8258-12534a9c4623\":{\"PropertyInfo\":{\"sceneGroupTitle\":\"\",\"sceneGroupDetail\":\"\",\"ComponentName\":\"씬 그룹\",\"ComponentType\":2,\"identifier\":\"0b5539a5-f34b-4d86-8258-12534a9c4623\"},\"Child\":{\"dab58732-ce23-484f-9ae2-06805dbab721\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"dab58732-ce23-484f-9ae2-06805dbab721\"},\"Child\":{\"623d96cd-0c40-4d6e-b704-5f5252e1565d\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"623d96cd-0c40-4d6e-b704-5f5252e1565d\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}},\"e80b5a77-e784-426f-986e-fdd8f381f2a7\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"e80b5a77-e784-426f-986e-fdd8f381f2a7\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}},\"eb002e12-f797-44b2-b20f-37a0caff4181\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"eb002e12-f797-44b2-b20f-37a0caff4181\"},\"Child\":{\"5bd34aef-9352-4f00-863b-b83332af996a\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"5bd34aef-9352-4f00-863b-b83332af996a\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}},\"5d9a5fb7-5955-490d-8c3d-bbdfeb434d34\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"5d9a5fb7-5955-490d-8c3d-bbdfeb434d34\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}}}},\"2310ed96-3d86-4b6e-af9f-cb1d600bbdba\":{\"PropertyInfo\":{\"sceneGroupTitle\":\"\",\"sceneGroupDetail\":\"\",\"ComponentName\":\"씬 그룹\",\"ComponentType\":2,\"identifier\":\"2310ed96-3d86-4b6e-af9f-cb1d600bbdba\"},\"Child\":{\"593c35fb-d337-4cf8-b884-57f8b3e5a105\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"593c35fb-d337-4cf8-b884-57f8b3e5a105\"},\"Child\":{\"c345e399-bfa8-42c8-b163-e97c78aceba5\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"c345e399-bfa8-42c8-b163-e97c78aceba5\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}},\"cbb1e6fe-f1d1-44ea-806c-d91b9b31236e\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"cbb1e6fe-f1d1-44ea-806c-d91b9b31236e\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}},\"56015194-4fec-4d19-b6aa-091f7f7a1129\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"56015194-4fec-4d19-b6aa-091f7f7a1129\"},\"Child\":{\"a44b43e5-3dcc-4cdb-be52-f8de0d7aca1c\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"a44b43e5-3dcc-4cdb-be52-f8de0d7aca1c\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}},\"d33e669e-3137-4151-b513-069960b25ef5\":{\"PropertyInfo\":{\"sceneTitle\":\"\",\"sceneDetail\":\"\",\"ComponentName\":\"씬\",\"ComponentType\":3,\"identifier\":\"d33e669e-3137-4151-b513-069960b25ef5\"},\"Child\":{\"00cca620-6e82-48bd-89d0-8b7b24e533dd\":{\"PropertyInfo\":{\"text\":\"텍스트를 입력해주세요\",\"fontSize\":32,\"alignment\":3,\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0,\"ComponentName\":\"텍스트\",\"ComponentType\":101,\"identifier\":\"00cca620-6e82-48bd-89d0-8b7b24e533dd\"},\"Transform\":{\"worldPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"worldScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"screenPosition\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenRotation\":{\"x\":0.0,\"y\":0.0,\"z\":0.0},\"screenScale\":{\"x\":1.0,\"y\":1.0,\"z\":1.0},\"ScreenMode\":0},\"BackGround\":{\"sprite\":\"TextBoxBg/0\",\"color\":{\"r\":1.0,\"g\":1.0,\"b\":1.0,\"a\":1.0},\"shadow\":0.0}}}}}}}}"
			)
			.param("userUUID", "498b1839dc29ed7bb2ee90ad6985c608")
			.param("workspaceUUID", "4d6eab0860969a50acbfa4599fbb5ae8");

		this.mockMvc.perform(request)
			.andDo(print())
			.andExpect((result -> assertTrue(result.getResponse().getContentAsString().contains("4002"))))
			.andExpect((result -> assertTrue(
				result.getResolvedException().getClass().isAssignableFrom(ContentServiceException.class))));
	}
}
